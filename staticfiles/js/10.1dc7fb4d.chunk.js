"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[10],{3281:function(e,t,n){n.d(t,{LV:function(){return d},s$:function(){return l},_r:function(){return p},rC:function(){return f},rt:function(){return h},Vi:function(){return y}});var r=n(5861),a=n(7757),o=n.n(a),s=n(3475),i=n(4569),c=n.n(i),u=n(7254),d=function(e){return function(){var t=(0,r.Z)(o().mark((function t(n,r){var a,i,d,l,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.H4}),a=r(),i=a.userLogin.userInfo,d={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i.token)}},t.next=6,c().post("/api/order/add/",e,d);case 6:l=t.sent,p=l.data,n({type:s.cj,payload:p}),n({type:u.Tc,payload:p}),localStorage.removeItem("cartItems"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),n({type:s.yR,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=(0,r.Z)(o().mark((function t(n,r){var a,i,u,d,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.Gk}),a=r(),i=a.userLogin.userInfo,u={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i.token)}},t.next=6,c().get("/api/order/".concat(e,"/"),u);case 6:d=t.sent,l=d.data,n({type:s.um,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:s.Ab,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},p=function(e,t){return function(){var n=(0,r.Z)(o().mark((function n(r,a){var i,u,d,l,p;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:s.Q1}),i=a(),u=i.userLogin.userInfo,d={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(u.token)}},n.next=6,c().put("/api/order/".concat(e,"/"),t,d);case 6:l=n.sent,p=l.data,r({type:s.jK,payload:p}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),r({type:s.iF,payload:n.t0.response&&n.t0.response.data.detail?n.t0.response.data.detail:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},f=function(e){return function(){var t=(0,r.Z)(o().mark((function t(n,r){var a,i,u,d,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:s.iI}),a=r(),i=a.userLogin.userInfo,u={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i.token)}},t.next=6,c().put("/api/orders/".concat(e._id,"/deliver/"),{},u);case 6:d=t.sent,l=d.data,n({type:s.c0,payload:l}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:s.ol,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},h=function(){return function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,i,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:s.Cg}),r=n(),a=r.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=6,c().get("/api/orders/myorders/",i);case 6:u=e.sent,d=u.data,t({type:s.s_,payload:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:s.qN,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},y=function(){return function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,i,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:s.cB}),r=n(),a=r.userLogin.userInfo,i={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=6,c().get("/api/orders/",i);case 6:u=e.sent,d=u.data,t({type:s.zL,payload:d}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:s.E0,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()}},5006:function(e,t,n){n(2791);var r=n(2469),a=n(184);t.Z=function(e){var t=e.variant,n=e.children;return(0,a.jsx)(r.Z,{variant:t,children:n})}},7678:function(e,t,n){n.r(t);var r=n(885),a=n(2791),o=n(9743),s=n(2677),i=n(1398),c=n(4523),u=n(9140),d=n(3360),l=n(6030),p=n(3504),f=n(5006),h=n(2592),y=n(3281),v=n(6871),m=(n(5593),n(3475)),x=n(184);t.default=function(){var e=(0,l.I0)(),t=(0,v.s0)(),n=(0,v.bS)("/order/:id").params.id,j=(0,l.v9)((function(e){return e.orderDetails})),g=j.order,b=j.error,Z=j.loading,w=(0,l.v9)((function(e){return e.orderPay})),k=w.success,P=w.loading,O=(0,l.v9)((function(e){return e.orderDeliver})),S=O.success,I=O.loading,C=(0,l.v9)((function(e){return e.userLogin})).userInfo,E=(0,a.useState)(!1),_=(0,r.Z)(E,2),A=_[0],N=_[1];return Z||b||(g.itemsPrice=g.orderItems.reduce((function(e,t){return e+t.price*t.qty}),0).toFixed(2)),(0,a.useEffect)((function(){C||t("/"),!g||k||g._id!==Number(n)||S?(e({type:m.wV}),e({type:m.Mo}),e((0,y.s$)(n))):g.isPaid||(window.paypal?N(!0):function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.paypal.com/sdk/js?client-id=AfAgq2GGlsSfZwF49lx4oiJ7T2Mwe-nO4hYh6fkjCfykFtdWErixlr5BNE_wjOp_BLT7jBSZCi3B8i2u",e.async=!0,e.onload=function(){N(!0)},document.body.appendChild(e)}())}),[e,g,n,k,S,t,C]),Z?(0,x.jsx)(a.Fragment,{children:(0,x.jsx)(h.Z,{})}):b?(0,x.jsx)(a.Fragment,{children:(0,x.jsx)(f.Z,{variant:"danger",children:b})}):(0,x.jsxs)(a.Fragment,{children:[(0,x.jsxs)("h1",{children:["Order: ",g._id]}),(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{md:8,children:(0,x.jsxs)(i.Z,{variant:"flush",children:[(0,x.jsxs)(i.Z.Item,{children:[(0,x.jsx)("h2",{children:"Shipping"}),(0,x.jsxs)("p",{children:["Name: ",(0,x.jsx)("strong",{children:g.user.name})]}),(0,x.jsxs)("p",{children:["Email:"," ",(0,x.jsx)("strong",{children:(0,x.jsx)("a",{href:"emailTo",children:g.user.email})})]}),(0,x.jsx)("p",{children:(0,x.jsxs)("strong",{children:["Name: ",g.user.name]})}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Shipping: "}),g.shippingAddress.address,",",g.shippingAddress.city,","," ",g.shippingAddress.postalCode,","," ",g.shippingAddress.country]}),g.isDelivered?(0,x.jsxs)(f.Z,{variant:"success",children:["Delivered on ",g.deliveredAt.substring(0,10)]}):(0,x.jsx)(f.Z,{variant:"warning",children:"Not Delivered"})]}),(0,x.jsxs)(i.Z.Item,{children:[(0,x.jsx)("h2",{children:"Payment Method"}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Method: "}),g.paymentMethod]}),g.isPaid?(0,x.jsxs)(f.Z,{variant:"success",children:["Paid on ",g.paidAt.substring(0,10)]}):(0,x.jsx)(f.Z,{variant:"warning",children:"Not Paid"})]}),(0,x.jsxs)(i.Z.Item,{children:[(0,x.jsx)("h2",{children:"Order Items"}),0===g.orderItems.length?(0,x.jsx)(f.Z,{variant:"info",children:"Order is Empty"}):(0,x.jsx)(i.Z,{variant:"flush",children:g.orderItems.map((function(e,t){return(0,x.jsx)(i.Z.Item,{children:(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{md:1,children:(0,x.jsx)(c.Z,{src:e.image,alt:e.name,fluid:!0,rounded:!0})}),(0,x.jsx)(s.Z,{children:(0,x.jsx)(p.Link,{to:"/product/".concat(e.product),children:e.name})}),(0,x.jsxs)(s.Z,{md:4,children:[e.qty," X $",e.price," = $",(e.qty*e.price).toFixed(2)]})]})},t)}))})]})]})}),(0,x.jsx)(s.Z,{md:4,children:(0,x.jsxs)(u.Z,{children:[(0,x.jsxs)(i.Z,{variant:"flush",children:[(0,x.jsx)(i.Z.Item,{children:(0,x.jsx)("h2",{children:"Order Summary"})}),(0,x.jsx)(i.Z.Item,{children:(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{children:"Items"}),(0,x.jsxs)(s.Z,{children:["$",g.itemsPrice]})]})}),(0,x.jsx)(i.Z.Item,{children:(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{children:"Shipping:"}),(0,x.jsxs)(s.Z,{children:["$",g.shippingPrice]})]})}),(0,x.jsx)(i.Z.Item,{children:(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{children:"Tax:"}),(0,x.jsxs)(s.Z,{children:["$",g.taxPrice]})]})}),(0,x.jsx)(i.Z.Item,{children:(0,x.jsxs)(o.Z,{children:[(0,x.jsx)(s.Z,{children:"Total:"}),(0,x.jsxs)(s.Z,{children:["$",g.totalPrice]})]})}),!g.isPaid&&(0,x.jsxs)(i.Z.Item,{children:[P&&(0,x.jsx)(h.Z,{}),A?(0,x.jsx)(d.Z,{className:"btn w-100",children:"Paypal (Disabled)"}):(0,x.jsx)(h.Z,{})]})]}),I&&(0,x.jsx)(h.Z,{}),C&&C.isAdmin&&g.isPaid&&!g.isDelivered&&(0,x.jsx)(i.Z.Item,{children:(0,x.jsx)(d.Z,{type:"button",onClick:function(){e((0,y.rC)(g))},className:"btn w-100",children:"Mark as Delivered"})})]})})]})]})}},3360:function(e,t,n){var r=n(1413),a=n(885),o=n(5987),s=n(1694),i=n.n(s),c=n(2791),u=n(5341),d=n(162),l=n(184),p=["as","bsPrefix","variant","size","active","className"],f=c.forwardRef((function(e,t){var n=e.as,s=e.bsPrefix,c=e.variant,f=e.size,h=e.active,y=e.className,v=(0,o.Z)(e,p),m=(0,d.vE)(s,"btn"),x=(0,u.FT)((0,r.Z)({tagName:n},v)),j=(0,a.Z)(x,2),g=j[0],b=j[1].tagName;return(0,l.jsx)(b,(0,r.Z)((0,r.Z)((0,r.Z)({},v),g),{},{ref:t,className:i()(y,m,h&&"active",c&&"".concat(m,"-").concat(c),f&&"".concat(m,"-").concat(f),v.href&&v.disabled&&"disabled")}))}));f.displayName="Button",f.defaultProps={variant:"primary",active:!1,disabled:!1},t.Z=f},2677:function(e,t,n){var r=n(885),a=n(1413),o=n(5987),s=n(1694),i=n.n(s),c=n(2791),u=n(162),d=n(184),l=["as","bsPrefix","className"],p=["className"],f=["xxl","xl","lg","md","sm","xs"];var h=c.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,s=(0,o.Z)(e,l);n=(0,u.vE)(n,"col");var c=[],d=[];return f.forEach((function(e){var t,r,a,o=s[e];delete s[e],"object"===typeof o&&null!=o?(t=o.span,r=o.offset,a=o.order):t=o;var i="xs"!==e?"-".concat(e):"";t&&c.push(!0===t?"".concat(n).concat(i):"".concat(n).concat(i,"-").concat(t)),null!=a&&d.push("order".concat(i,"-").concat(a)),null!=r&&d.push("offset".concat(i,"-").concat(r))})),[(0,a.Z)((0,a.Z)({},s),{},{className:i().apply(void 0,[r].concat(c,d))}),{as:t,bsPrefix:n,spans:c}]}(e),s=(0,r.Z)(n,2),c=s[0],h=c.className,y=(0,o.Z)(c,p),v=s[1],m=v.as,x=void 0===m?"div":m,j=v.bsPrefix,g=v.spans;return(0,d.jsx)(x,(0,a.Z)((0,a.Z)({},y),{},{ref:t,className:i()(h,!g.length&&j)}))}));h.displayName="Col",t.Z=h},5593:function(e,t,n){var r=s(n(2791)),a=s(n(4164)),o=s(n(2007));function s(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d(this,l(t).call(this,e))).state={isSdkReady:!1},n}var n,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,a=n.options,o=n.amount,s=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(a&&a.currency?a.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:s}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,o=t.onSuccess,s=t.createOrder,i=t.createSubscription,u=t.onApprove,d=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var l=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:a.default}),p=n&&!s?function(t,n){return e.createOrder(t,n)}:function(e,t){return s(e,t)};return r.default.createElement(l,c({},this.props,{createOrder:i?void 0:p,createSubscription:i,onApprove:o?function(t,n){return e.onApprove(t,n)}:function(e,t){return u(e,t)},style:d}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,a=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();a.push("".concat(t,"=").concat(n[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(a.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),r&&r()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(n.prototype,o),s&&u(n,s),t}(r.default.Component);f(h,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),f(h,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},2391:function(e){var t=function(){};e.exports=t}}]);
//# sourceMappingURL=10.1dc7fb4d.chunk.js.map